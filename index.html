<!DOCTYPE html>
<html>
    <head>
        <title>You Talkin' To Me?</title>
    </head>
    <body>
        <p>Heard: <span class="heard-output">none</span></p>
        <script type="text/javascript">
            window.SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;
            window.SpeechRecognitionError = window.webkitSpeechRecognitionError || window.SpeechRecognitionError;
            window.SpeechRecognitionEvent = window.webkitSpeechRecognitionEvent || window.SpeechRecognitionEvent;
            window.SpeechGrammar = window.webkitSpeechGrammar || window.SpeechGrammar;
            window.SpeechGrammarList = window.webkitSpeechGrammarList || window.SpeechGrammarList;

            // window.SpeechSynthesis = window.webkitSpeechSynthesis || window.SpeechSynthesis;
            // window.SpeechSynthesisEvent = window.webkitSpeechSynthesisEvent || window.SpeechSynthesisEvent;
            // window.SpeechSynthesisErrorEvent = window.webkitSpeechSynthesisErrorEvent || window.SpeechSynthesisErrorEvent;
            // window.SpeechSynthesisUtterance = window.webkitSpeechSynthesisUtterance || window.SpeechSynthesisUtterance;

            if ('SpeechRecognition' in window) {
                console.log('// speech recognition API supported');
            } else {
                console.log('// speech recognition API not supported');
            }

            const recognition = new window.SpeechRecognition();
            const speechRecognitionList = new SpeechGrammarList();
            const heardOutput = document.querySelector('.heard-output');

            recognition.continuous = true;
            recognition.lang = 'en-US';
            recognition.interimResults = false;
            recognition.maxAlternatives = 5;

            recognition.start();

            recognition.addEventListener('result', event => {
                console.log('Raw Event', event)
                const transcript = event.results[0][0].transcript;
                console.log('You said: ', transcript);
                heardOutput.textContent = transcript;
            });
            recognition.addEventListener('end', recognition.start);
        </script>
    </body>
</html>
